export default(async(e=null,f=null,t=!1)=>{if(!isFn(f)||!e)return!1;let l="AsyncFunction"===f.constructor.name;(isList(e)||isCollect(e))&&(e=Array.from(e));let r=e=>{for(let t=0;t<e.length&&!1!==f(e[t],t);t++);},i=async e=>{let t=0;for(let l of e){if(await f(l,t)===!1)break;t++}},a=e=>{let t=0;for(let l of e){if(!1===f(l,t))break;t++}};if(isArr(e))(l?i:r)(e);else if(isSet(e)||isMap(e)){if(l){if(isSet(e))i(e);else for(let[o,n]of e)if(await f(n,o)===!1)break}else if(isSet(e))a(e);else for(let[s,_]of e)if(!1===f(_,s))break}else if(isNum(e))(l?i:r)(Array.from({length:e},(e,f)=>f+1));else if(isStr(e))(l?i:r)(e);else if(ArrayBuffer.isView(e)||e.constructor&&isFn(e.next,e.throw))(l?i:a)(e);else if(l){if(t){let u=async(e,t=[])=>{if(!hasObj(e)&&!hasArr(e)){await f(e,t);return}if(isArr(e)){let l=0;for(let r of e)await u(r,[...t,l]),l++;return}for(let i of Object.keys(e)){let a=[...t,i];if(isObj(e[i])||isArr(e[i]))await u(e[i],a);else if(await f(e[i],a)===!1)break}};u(e)}else for(let w of Object.keys(e))if(await f(e[w],w)===!1)break}else if(t){let k=(e,t=[])=>{if(!hasObj(e)&&!hasArr(e)){f(e,t);return}if(isArr(e)){for(let l=0;l<e.length;l++)k(e[l],[...t,l]);return}for(let r in e)if(e.hasOwnProperty(r)){let i=[...t,r];if(isObj(e[r])||isArr(e[r]))k(e[r],i);else if(!1===f(e[r],i))break}};k(e)}else for(let c in e)if(e.hasOwnProperty(c)&&!1===f(e[c],c))break});