export default async function(){window.w=(e,t)=>window[e]=t;let e=new URL(import.meta.url).searchParams;if(!e.size){let t=document.querySelector('script[type="module"]')?.getAttribute("src");e=t?new URL(t,window.location.href).searchParams:null}w("ver",(e?.get("cache")??null)!==null?parseInt(String(Math.floor(Date.now()/10)).slice(4),10):parseInt(e?.get("v")||0,10));let a=(await import(`../config.js?v=${ver}`)).default;w("coreData",a),["component","event","eventAdd","eventDefault","evtAdd","module","spy","storage","core"].forEach(e=>coreData[e]={}),coreData.prevent={},coreData.clear={component:{},module:{}},coreData.state=[],coreData.cache=Object.assign({component:50,module:50,api:50,state:5},coreData.cache&&"object"==typeof coreData.cache?coreData.cache:{}),coreData.cache.state=Math.max(coreData.cache.state,3);let r='[data-event="false"]',n={isWindow:Window,isDocument:Document,isCollect:HTMLCollection,isNode:Node,isList:NodeList,isElem:Element,isReg:RegExp,isSet:Set,isMap:Map,isDate:Date,isFile:File,isFiles:FileList};for(let l in n)n.hasOwnProperty(l)&&w(l,(...e)=>e.every(e=>e instanceof n[l]));let i={isBool:"boolean",isFn:"function",isSymbol:"symbol",isNum:"number",isStr:"string"};for(let o in i)i.hasOwnProperty(o)&&w(o,(...e)=>e.every(e=>typeof e===i[o]));w("log",(...e)=>console.log(...e)),w("isDef",(...e)=>e.every(e=>void 0!==e)),w("isArr",(...e)=>e.every(e=>Array.isArray(e))),w("isObj",(...e)=>e.every(e=>"object"==typeof e&&null!==e&&!isArr(e)&&!Object.keys(n).some(t=>e instanceof n[t]))),w("hasNum",(...e)=>e.every(e=>isNum(e)&&0!==e)),w("hasStr",(...e)=>e.every(e=>isStr(e)&&e.length)),w("hasArr",(...e)=>e.every(e=>isArr(e)&&e.length)),w("hasObj",(...e)=>e.every(e=>isObj(e)&&Object.keys(e).length)),w("isNan",(...e)=>e.every(e=>!/^-?[0-9]+(\.[0-9]+)?$/.test(e))),w("isTrue",(...e)=>e.every(e=>![void 0,null,!1,NaN].includes(e))),w("hasTrue",(...e)=>e.every(e=>![void 0,null,!1,NaN,0,""].includes(e))),w("equal",(e="",t="")=>{if(e===t)return!0;if(null==e||null==t)return e===t;if(isFn(e)&&isFn(t))return String(e)===String(t);if(isElem(e)&&isElem(t))return e===t;try{return JSON.stringify(e)===JSON.stringify(t)}catch{return!1}}),w("parseJson",e=>{if(isArr(e)||isObj(e))return e;try{return JSON.parse(e)}catch(t){return!1}}),w("toJson",e=>{if(isStr(e)&&parseJson(e))return e;try{return JSON.stringify(e)}catch(t){return!1}}),w("toArr",(...e)=>[].concat(...e)),w("toNum",(...e)=>{let t=e=>isArr(e)?e.flatMap(t):parseFloat(String(e).replace(/[^0-9.-]/g,"").trim()),a=e.flatMap(t);return 1===a.length?a[0]:a}),w("formatNum",(e=null,...t)=>{if(!e||(isNum(e)||(e=parseFloat(String(e).replace(/[^0-9.-]/g,"").trim())),isNaN(e)))return!1;let[a=2,r=".",n=" "]=t,[l,i]=e.toFixed(a).split("."),o=l.replace(/\B(?=(\d{3})+(?!\d))/g,n);return a>0?o+r+i:o}),w("toPath",e=>"/"+String(e).trim().replace(/^(https?:)?\/\/[^/]+/,"").replace(/^\//,"")),w("toBuild",e=>{if(!e)return!1;e=(e=String(e).trim()).includes(":")&&!["[","{"].includes(e[0])?`{${e}}`:e;try{let t=["[","{"].includes(e[0])?parseJson(e.replace(/(?:^|[^'"])\$\((['"])(.*?)\1\)(?=\s|$|[^'"])/g,"'@@$2'").replace(/\\'/g,"&#39;").replace(/'/g,'"').replace(/\&#39;/g,"'").replace(/([{,]\s*)(['"]?)([^\s"{}[\],=]+(?:\:[^\s"{}[\],=]+)*)\2(?=\s*:)/g,'$1"$3"')):e.split(",").map(e=>e.trim());return t||console.warn(`Failed to convert data for the components into an object: ${e}`),t}catch{return console.warn(`Failed to convert data for the components into an object: ${e}`),!1}});let s=e=>(...t)=>{let a=t=>isArr(t)?t.flatMap(a):e(t),r=t.flatMap(a);return 1===r.length?r[0]:r};w("toLower",s(e=>e.toLowerCase())),w("toUpper",s(e=>e.toUpperCase())),w("toCamel",s(e=>e.replace(/[-_](\w)/g,(e,t)=>t.toUpperCase()).replace(/^[-_]/,""))),w("toKebab",s(e=>e.replace(/_/g,"-").replace(/[A-Z]/g,e=>"-"+e.toLowerCase()))),w("toSnake",s(e=>e.replace(/-/g,"_").replace(/[A-Z]/g,e=>"_"+e.toLowerCase()))),w("len",(...e)=>e.reduce((e,t)=>{let a=(isNum(t)?String(t):t)||"";return e+(isSet(t)||isMap(t)?t.size:isObj(a)?Object.keys(a).length:a.length)},0)),w("device",()=>{let e=navigator.userAgent.toLowerCase();return/tablet|ipad|android(?!.*mobile)|macintosh|windows(?!.*(phone|mobile|nt|win(32|64|wow64)))|playstation portable/.test(e)&&("ontouchend"in document||"orientation"in window||navigator.maxTouchPoints>0)?"tablet":/mobile|mobi|android|iphone|ipod|blackberry|iemobile|opera mini|phone|windows ce|windows phone|pocket|palm|cellphone|smartphone|webos|wos/.test(e)?"mobile":"desktop"});let u=e=>isElem(e)||isFn(e)||isReg(e)||isSymbol(e)||isFile(e)||e instanceof WeakMap||e instanceof WeakSet;w("cloneObj",e=>{if(null===e||"object"!=typeof e)return e;if(isArr(e))return e.map(e=>u(e)?e:cloneObj(e));if(u(e))return e;if(isDate(e))return new Date(e.getTime());if(isFiles(e))return Array.from(e);if(isSet(e)){let t=new Set;for(let a of e)t.add(cloneObj(a));return t}if(isMap(e)){let r=new Map;for(let[n,l]of e)r.set(n,cloneObj(l));return r}let i={};for(let o in e)e.hasOwnProperty(o)&&(i[o]=u(e[o])?e[o]:cloneObj(e[o]));return i}),w("rateLimit",function(e,t=0,a=!1){let r,n=0,l=(t,a)=>e.apply(t,a);return function(...e){let i=this,o=Date.now();a?o-n>=t&&(n=o,l(i,e)):(clearTimeout(r),r=setTimeout(()=>l(i,e),t))}});let c=isObj(coreData.events)?Object.keys(coreData.events):null,p=c?c.find(e=>/^(?:\$?DOMContentLoaded(?:_.*)?)$/i.test(e)):null;p&&(coreData.events[p.replace(/DOMContentLoaded/i,"ready")]=coreData.events[p],delete coreData.events[p]);let d=cloneObj(coreData.events),f=e=>e.replace(/\$|_(window|document|allow|prevent)/gi,""),h=e=>isObj(d)?Object.keys(d).filter(t=>null!=coreData.events[t]&&t.includes(e)).map(f):null,m=["main","window","document","allow","prevent"].reduce((e,t)=>(e[t]=h("main"===t?"$":`_${t}`),e),{});coreData.events=c?c.reduce((e,t)=>(coreData.events[t]&&(e[f(t)]=coreData.events[t]),e),{}):null;let g={animation:["animationcancel","animationend","animationiteration","animationstart"],dragdrop:["drag","dragend","dragenter","dragleave","dragover","dragstart","drop"],key:["keydown","keypress","keyup"],mouse:["mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup"],pointer:["pointercancel","pointerdown","pointerenter","pointerleave","pointerlockchange","pointerlockerror","pointermove","pointerout","pointerover","pointerrawupdate","pointerup"],touch:["touchcancel","touchend","touchmove","touchstart"],transition:["transitioncancel","transitionend","transitionrun","transitionstart"]};for(let y in g)coreData.events.hasOwnProperty(y)&&(g[y].forEach(e=>{coreData.events[e]=coreData.events[y]}),delete coreData.events[y]);for(let v in m)if(m.hasOwnProperty(v))for(let b in g){let _=m[v].indexOf(b);-1!==_&&(g[b].forEach(e=>{m[v].includes(e)||m[v].push(e)}),m[v].splice(_,1))}let E=coreData.events?.mutation&&isObj(coreData.events.mutation)?coreData.events.mutation:{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0},A=["abort","blur","canplay","canplaythrough","cuechange","durationchange","emptied","ended","error","focus","fullscreenchange","loadstart","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","progress","ratechange","scroll","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"];w("dEvent",(e,t)=>document.addEventListener(e,t,A.includes(e))),w("wEvent",(e,t)=>window.addEventListener(e,t,A.includes(e))),w("dEventRemove",(e,t)=>document.removeEventListener(e,t,A.includes(e))),w("wEventRemove",(e,t)=>window.removeEventListener(e,t,A.includes(e)));let x=async(e,t)=>{let a=!["core","event"].includes(e);if("event"===e&&!m.main.includes(t))return!1;a&&len(coreData[e])>(coreData.cache?.[e]||100)&&(coreData[e]={}),a&&(coreData.clear[e][t]=Math.floor(Date.now()/1e3));try{return coreData[e].hasOwnProperty(t)&&isFn(coreData[e][t])?coreData[e][t]:coreData[e][t]=(await import(`../${"core"===e?"core":`${e}s`}/${t}.js?v=${ver}`)).default}catch{return()=>{}}},k=e=>e&&(hasArr(e)||isElem(e)||isList(e)||isCollect(e)),L=e=>isArr(e)?e:isList(e)||isCollect(e)?Array.from(e):[e],P=e=>isStr(e)?e.replace(/,/g," ").replace(/\s{2,}/g," ").split(" ").filter(Boolean):[],C=e=>e?[...new Set(e.flatMap(e=>isStr(e)?P(e):e))]:null,O=e=>(e=hasArr(e)?e.filter(e=>null!==e&&!1!==e&&!0!==e):null,hasArr(e)?e:null),S=e=>({before:"beforebegin",after:"afterend",begin:"afterbegin",end:"beforeend"})[e]||"beforeend";w("checkOff",(e,t)=>!P(e?.dataset.off)?.includes(t)),w("cls",{add(...e){if(!(e=O(e))||!k(this))return!1;e=C(e),L(this).forEach(t=>t.classList.add(...e))},remove(...e){if(e=O(e),!k(this))return!1;e=C(e),L(this).forEach(t=>{e?t.classList.remove(...e):t.removeAttribute("class")})},has(...e){return!!((e=O(e))&&k(this))&&(!(e=C(e))||L(this).every(t=>e.every(e=>t.classList.contains(e))))},toggle(...e){let t=null,a=[];if(e.length&&(t=e.includes(!0)||!e.includes(!1)&&null,a.push(...e.flatMap(e=>toArr(e))),a=C(O(a))),!a?.length||!k(this))return!1;let r=L(this),n=isBool(t)?t:void 0;if(r.forEach(e=>a.forEach(t=>e.classList.toggle(t,n))),isElem(this)&&a?.length===1)return isBool(t)?t:r[0].classList.contains(a[0])},replace(e=null,t=""){if(!k(this))return!1;let a=L(this);isObj(e)?a.forEach(t=>{for(let a in e)e.hasOwnProperty(a)&&t.classList.replace(a,e[a])}):a.forEach(a=>a.classList.replace(e,t))}}),w("attr",{get(...e){if(e=O(e),!k(this))return null;e=C(e);let t=L(this).map(t=>(e||[...t.attributes].map(e=>e.name)).reduce((e,a)=>(e[a]=t.getAttribute(a),e),{}));return e?.length===1&&(t=t.map(t=>t[e[0]])),isElem(this)?len(t[0])?t[0]:null:t.length?t:null},set(e=null,t=""){if(!k(this))return!1;let a=L(this);isObj(e)?a.forEach(t=>{for(let a in e)e.hasOwnProperty(a)&&t.setAttribute(a,e[a])}):a.forEach(a=>a.setAttribute(e,t))},remove(...e){if(e=O(e),!k(this))return!1;e=C(e),L(this).forEach(t=>(e||[...t.attributes].map(e=>e.name)).forEach(e=>t.removeAttribute(e)))},has(...e){return!!((e=O(e))&&k(this))&&(!(e=C(e))||L(this).every(t=>e.every(e=>t.hasAttribute(e))))},toggle(...e){let t=null,a=[];if(e.length&&(t=e.includes(!0)||!e.includes(!1)&&null,a.push(...e.flatMap(e=>toArr(e))),a=C(O(a))),!a?.length||!k(this))return!1;let r=L(this),n=isBool(t)?t:void 0;if(r.forEach(e=>a.forEach(t=>e.toggleAttribute(t,n))),isElem(this)&&a?.length===1)return isBool(t)?t:r[0].hasAttribute(a[0])}});let T=(e,t,a)=>{if(a=O(a),!k(t))return null;a=C(a);let r=null;return r=L(t).map(t=>{let r="get"===e?t.style:getComputedStyle(t),n=a||Array.from(r),l=n.reduce((t,a)=>{let n="get"===e?r.getPropertyValue(toKebab(a)):r[toCamel(a)];return t[a]=""!==n?n:null,t},{});return a?l:hasObj(l)?l:null}),a?.length===1&&(r=r.map(e=>e[a[0]])),isElem(t)?r[0]:r};async function M(e,t,a){return(await x("core","spy"))(e,t,[a,k,C,O,L,E])}w("css",{get(...e){return T("get",this,e)},in(...e){return T("in",this,e)},set(e=null,t=null,a=null){if(!(e=hasStr(e)||hasObj(e)?e:null)||!k(this))return!1;let r=L(this);hasStr(t)?(a=a?"important":void 0,e=toKebab(e),r.forEach(r=>r.style.setProperty(e,t,a))):isObj(e)?r.forEach(t=>{for(let a in e)e.hasOwnProperty(a)&&t.style.setProperty(toKebab(a),e[a])}):r.forEach(t=>t.style.cssText=e)},remove(...e){if(e=O(e),!k(this))return!1;let t=L(this);(e=C(e))?t.forEach(t=>e.forEach(e=>t.style.removeProperty(toKebab(e)))):t.forEach(e=>e.removeAttribute("style"))},has(...e){return!!((e=O(e))&&k(this))&&(e=C(e),L(this).every(t=>e.every(e=>Boolean(t.style.getPropertyValue(toKebab(e))))))}}),w("spy",{async get(...e){return M("get",this,e)},async has(...e){return M("has",this,e)},async on(...e){return M("on",this,e)},async off(...e){return M("off",this,e)}});let H={cls:{add:cls.add,remove:cls.remove,has:cls.has,toggle:cls.toggle,replace:cls.replace},attr:{get:attr.get,set:attr.set,remove:attr.remove,has:attr.has,toggle:attr.toggle},css:{get:css.get,in:css.in,set:css.set,remove:css.remove,has:css.has},spy:{get:spy.get,has:spy.has,on:spy.on,off:spy.off}},N=(e,t)=>{t.forEach(t=>{Object.defineProperty(t,e,{value:window[e],writable:!0,configurable:!0,enumerable:!1})})};[Element.prototype,Array.prototype,NodeList.prototype,HTMLCollection.prototype].forEach(e=>{for(let t in H)H.hasOwnProperty(t)&&Object.defineProperty(e,t,{get(){return Object.fromEntries(Object.entries(H[t]).map(([e,t])=>[e,t.bind(this)]))},configurable:!0,enumerable:!1})}),["val","html","outHtml","txt","inTxt","num"].forEach(e=>{w(e,function(t=!1,a=null){if(!k(this))return null;let r=L(this);if(a&&["html","txt"].includes(e)){t=isTrue(t)?t:"";let n=S(a),l="txt"===e?"insertAdjacentText":"insertAdjacentHTML",i=!!["before","after"].includes(a);r.forEach(e=>{let a=i?e.$(".. [data-remove] ?"):e.$("[data-remove] ?");a.length&&a.forEach(e=>e.remove()),e[l](n,t)})}else{let o={val:"value",html:"innerHTML",outHtml:"outerHTML",txt:"textContent",inTxt:"innerText",num:"textContent"}[e]||"innerHTML";if([!1,!0].includes(t)){let s="num"===e?r.map(e=>parseFloat(String(e[o]).replace(/[^0-9.-]/g,"").trim())):r.map(e=>e[o]);return s.length&&isElem(this)?s[0]:s}t=null===t?"":t,r.forEach(e=>e[o]=t)}})}),["val","html","outHtml","txt","inTxt","num"].forEach(e=>{N(e,[Element.prototype,Array.prototype,NodeList.prototype,HTMLCollection.prototype])});let D=(e,t)=>{if(!e.includes("%"))return[parseInt(e,10)];{let[a,r]=e.split("%").map(e=>e.trim());return a=a?parseInt(a,10):0,Array.from({length:(r=r?parseInt(r,10):t)-a},(e,t)=>a+t)}},j=(e,t)=>{if(e){if(isElem(t))return t.matches(e)||t.querySelector(e)?t:null;if(hasArr(t))return t.filter(t=>t.matches(e)||t.querySelector(e))||[]}return t};w("$",function(e=null,t=!1){if(!0===e)return document;if(!hasStr(e))return null;let a=null,r=e.match(/\{\{(.*?)\}\}/)?.[1]?.toLowerCase()??null;(e=e.replace(/\{\{.*?\}\}/," ").replace(/(\.{2}|@|<<|>>|::|~~)/g," $1 ").replace(/\s+/g," ").trim()).startsWith("?")&&(e=`* ?${e.slice(1)}`);let n=e.match(/^(.*)\?\s*([\d\[\]\-%,\s]*)$/),[l,i]=n?[n[1].trim(),n[2].trim()]:[e,null],o=[],s="",u="";for(let c of l){if("([{".includes(c))u+=c;else if(")]}".includes(c))u=u.slice(0,-1);else if("\"'".includes(c))u=u||c;else if(" "===c&&!u){o.push(s),s="";continue}s+=c}s&&o.push(s);let p=[],d="";if(o.forEach((e,t)=>{e.match(/^\{.*\}$/)||["..","<<",">>","::","~~"].includes(e)||0===t&&"@"===e?(p.push(e.trim()),d=""):(""!==d?p[p.length-1]+=` ${e}`:p.push(e.trim()),d=e)}),p.length){a=t&&!["@","..","<<",">>","::","~~"].includes(p[0])?document:this||document,"@"===p[0]&&p.shift();let f=i?i.replace(/-%/g,"%-").match(/\[(.*?)\]|[^,\s]+/g).map(e=>e.trim()):null,h=!r&&(null===i||!!f&&f?.length===1&&0==f[0]),m=p.length;if(p.forEach((e,t)=>{if(!e.startsWith("{")&&!e.endsWith("}")){let r=t+1<m&&p[t+1].startsWith("{")&&p[t+1].endsWith("}")?p[t+1].replace(/^\{|\}$/g,""):null,n=t===m-1,l=r&&m===t+2,i=n&&h||r&&!l||!n&&!l;if(".."===e)a=r?a.closest(r):a.parentElement;else if(["<<",">>"].includes(e)){let o=">>"===e?"nextElementSibling":"previousElementSibling",s=a[o];if(r){let u=null;for(;s;){if(s.matches(r)||s.querySelector(r)){u=s;break}s=s[o]}a=u}else a=s}else"::"===e?a=j(r,a=i?a.children[0]:[...a.children]):"~~"===e?a=j(r,a=i?a.parentElement.children[0]:[...a.parentElement.children]):(e=e.replace(/^[\+\~\>\<]+/,"").trim(),a=!n||n&&h?a.querySelector(e):[...a.querySelectorAll(e)])}}),r&&(hasArr(a)||isElem(a))&&(a=isElem(a)?a.innerHTML.toLowerCase().includes(r)?a:null:a.filter(e=>e.innerHTML.toLowerCase().includes(r))),hasArr(a)&&f){let g=a?.length;f=f.map(e=>e.replace(/-([0-9]+)/g,(e,t)=>g-parseInt(t,10)));let y=f.filter(e=>!e.includes("[")),v=f.map(e=>{let t=e.match(/^\[(.*?)\]$/);return t?t[1].split(",").map(e=>e.trim()):[]}).flat().filter(Boolean),b={isSuit:[...new Set(y.flatMap(e=>D(e,g)))].filter(e=>e<g),isExcep:[...new Set(v.flatMap(e=>D(e,g)))].filter(e=>e<g)};if(hasArr(b.isExcep)&&!hasArr(b.isSuit))a=a.filter((e,t)=>!b.isExcep.includes(t));else{let _=b.isExcep?b.isSuit.filter(e=>!b.isExcep.includes(e)):b.isSuit;a=a.filter((e,t)=>_.includes(t))}a=a?.length?a:null}a=null!==i&&(!f||f?.length!==1||f[0].includes("%")||f[0].includes("["))?isArr(a)?a:isElem(a)?[a]:[]:hasArr(a)?a[0]:isArr(a)?null:a}return a}),N("$",[Element.prototype,Document.prototype,DocumentFragment.prototype]),$.create=function(e,t={}){if(!isStr(e))return!1;let a=document.createElement(e);if(isObj(t.attr))for(let r in t.attr)t.attr.hasOwnProperty(r)&&a.setAttribute(r,t.attr[r]);return t.txt?a.textContent=t.txt:t.html&&(a.innerHTML=t.html),hasArr(t.children)&&t.children.forEach(e=>{a.appendChild(isNode(e)?e:document.createTextNode(e))}),a},$.insert=async function(...e){return(await x("core","selector"))("insert",[e,k,S,L])},$.replace=async function(...e){return(await x("core","selector"))("replace",[e,k,L])},$.swap=async function(...e){return(await x("core","selector"))("swap",[e])},w("storage",{get(...e){e=C(O(e));let t=e?.length;if(!t)return len(coreData.storage)?coreData.storage:null;{let a=e.reduce((e,t)=>(e[t]=coreData.storage[t]??null,e),{});return t>1?a:Object.values(a)[0]}},set(e,t=null){if(!e)return!1;if(isObj(e))for(let a in e)e.hasOwnProperty(a)&&(coreData.storage[a]=e[a]);else coreData.storage[e]=t},remove(...e){(e=C(O(e)))?e.forEach(e=>{coreData.storage.hasOwnProperty(e)&&delete coreData.storage[e]}):coreData.storage={}}}),w("cookie",{set(e=null,t="",a={}){if(!isTrue(e))return!1;let r=(e=a.prefixSecure?`__Secure-${e}=`:a.prefixHost?`__Host-${e}=`:`${e}=`)+encodeURIComponent("object"==typeof t&&null!==t?JSON.stringify(t):t);r+=a.prefixHost?"; path=/":a.path?`; path=${a.path}`:"",a.domain&&!a.prefixHost&&(r+=`; domain=${a.domain}`),a.age&&(r+=`; max-age=${a.age}`),a.expires&&(isNum(a.expires)&&(a.expires=Date.now()+864e5*a.expires),r+=`; expires=${new Date(a.expires).toUTCString()}`),(a.secure||a.prefixSecure||a.prefixHost)&&(r+="; secure"),a.same&&(r+=`; samesite=${a.same}`),document.cookie=r},get(...e){e=C(O(e));let t=e?.length,a=document.cookie.split(";");if(t){let r=e.reduce((e,t)=>{let r=a.map(e=>e.trim()).find(e=>e.startsWith(`${t}=`)||e.startsWith(`__Secure-${t}=`)||e.startsWith(`__Host-${t}=`)),n=r?decodeURIComponent(r.split("=")[1]):null,l=parseJson(n);return e[t]=l||n,e},{});return t>1?r:Object.values(r)[0]}{let n=a.reduce((e,t)=>{let[a,r]=t.trim().split("=");if(isTrue(a)){if(isDef(r)){let n=decodeURIComponent(r)??null,l=parseJson(n);e[a]=l||n}else e[a]=null}return e},{});return len(n)?n:null}},remove(e=null,t={}){if(!isTrue(e))return!1;let a=`${e=e.replace(/^(?:__Secure-|__Host-)/,"")}=`;t.path&&(a+=`; path=${t.path}`),t.domain&&(a+=`; domain=${t.domain}`),a+="; max-age=0",t.secure&&(a+="; secure"),t.same&&(a+=`; samesite=${t.same}`),document.cookie=a,a=`__Secure-${e}=`,t.path&&(a+=`; path=${t.path}`),t.domain&&(a+=`; domain=${t.domain}`),a+="; max-age=0; secure",t.same&&(a+=`; samesite=${t.same}`),document.cookie=a,a=`__Host-${e}=; path=/; max-age=0; secure`,t.same&&(a+=`; samesite=${t.same}`),document.cookie=a}});let W=e=>new Proxy({},{get(t,a){if(!["then","catch","finally","constructor"].includes(a))return async(...t)=>{let r=await x(e,a);return isFn(r)?await r(...t):r}}});["component","module"].forEach(e=>w(e,W(e))),w("$it",new Proxy({},{get(e,t){if(!["then","catch","finally","constructor"].includes(t))return $(`[data-it="${t}"] ?`)},set(e,t,a){if(["then","catch","finally","constructor"].includes(t))return;let r=$(`[data-it="${t}"] ?`);return r.length&&r.forEach(e=>e.setAttribute("data-it",a)),!0}})),w("it",new Proxy({},{get(e,t){if(["then","catch","finally","constructor"].includes(t))return;let a=$(`[data-it="${t}"]`);if(!a)return null;{let r=a.innerHTML;return isNan(r.trim())?r:toNum(r.trim())}},set(e,t,a){if(["then","catch","finally","constructor"].includes(t))return;let r=$(`[data-it="${t}"] ?`);return r.length&&r.forEach(e=>e.innerHTML=a),!0}})),w("each",async function(e=null,t=!1){(await x("core","each"))(this,e,t)}),N("each",[Array.prototype,Object.prototype,Number.prototype,String.prototype,Map.prototype,Set.prototype,NodeList.prototype,HTMLCollection.prototype]),w("tpl",async(e=null,t=null)=>(await x("core","tpl"))(e,t)),["get","set","add","remove","replace","swap","count","pos","component"].forEach(e=>{tpl[e]=async(...t)=>await tpl(e,t)}),w("waitState",()=>new Promise(e=>{let t=()=>{window.removeEventListener("popstate",t),e()};window.addEventListener("popstate",t)})),w("sleep",async(e=0)=>(await x("core","sleep"))(e)),w("hash",async function(...e){return(await x("core","hash"))(this,e)}),N("hash",[String.prototype,Number.prototype,Array.prototype,Object.prototype]),w("toScroll",async function(e=null){return(await x("core","scroll"))(this,e)}),N("toScroll",[Element.prototype,Document.prototype]),w("build",async function(...e){return!!isElem(e[0].it)&&(e[1]=e[1]?.trim()||null,!!e[1]&&(await x("core","build"))(e[0],e[1].endsWith("-in")?e[0].it.$(`..{[data-${e[1]}]}`)?.getAttribute(`data-${e[1]}`):e[0].it.getAttribute(`data-${e[1]}`)))}),["init","api","stream","spa","content","state","popstate","prestate","readFile"].forEach(e=>w(e,async(...t)=>(await x("core",e))(...t)));let q={core:["api","content","init","invisible","load","mutation","popstate","prestate","readfile","ready","spa","state","stream","visible"],target:["abort","auxclick","beforecopy","beforecut","beforeinput","beforepaste","blur","canplay","canplaythrough","change","click","contextmenu","copy","cuechange","cut","dblclick","durationchange","emptied","ended","error","focus","focusin","focusout","fullscreenchange","gotpointercapture","input","loadstart","loadeddata","loadedmetadata","lostpointercapture","paste","pause","play","playing","progress","ratechange","reset","scroll","seeked","seeking","select","stalled","submit","suspend","timeupdate","volumechange","waiting","wheel"],allow:["abort","animationcancel","animationend","animationiteration","animationstart","blur","canplay","canplaythrough","change","cuechange","DOMContentLoaded","drag","dragend","dragleave","durationchange","emptied","ended","error","focus","focusin","focusout","gotpointercapture","input","load","loadstart","loadeddata","loadedmetadata","lostpointercapture","mouseenter","mouseleave","mousemove","mouseout","mouseover","playing","pointercancel","pointerenter","pointerleave","pointerlockchange","pointerlockerror","pointerout","pointerover","pointerrawupdate","progress","ratechange","ready","resize","scroll","seeked","select","stalled","suspend","timeupdate","transitioncancel","transitionend","transitionrun","transitionstart","waiting"],event:["beforecopy","beforecut","beforeinput","beforepaste","copy","cut","dragstart","fullscreenchange","paste","pause","play","seeking","volumechange"],window:["focusin","focusout","keydown","keypress","keyup","load","mousedown","mousemove","mouseout","mouseover","mouseup","popstate","resize","scroll","wheel"]};for(let F in g)g.hasOwnProperty(F)&&(q.target=q.target.concat(g[F]));let B=e=>!m.prevent.includes(e)&&(m.allow.includes(e)||q.allow.includes(e)&&!q.event.includes(e));wEvent("popstate",async e=>{coreData.prevent.popstate?coreData.prevent.popstate=!1:(await popstate(e),coreData.events?.popstate&&hasArr(coreData.eventAdd?.popstate)&&coreData.eventAdd.popstate.forEach(({fn:t})=>t(e)))});let V=async(e,t=!1,a=!1)=>{if(coreData.events[e]){let r=m.document.includes(e),n=m.window.includes(e)||q.window.includes(e);t&&(r?dEvent:n?wEvent:dEvent)(e,coreData.eventDefault[e]),a&&m.main.includes(e)&&(!coreData.event.hasOwnProperty(e)||!isFn(coreData.event[e]))&&(coreData.event[e]||=(await import(`../events/${e}.js?v=${ver}`)).default,coreData.events?.[e]&&(!r&&n?wEvent:dEvent)(e,coreData.event[e]))}};w("formObj",async e=>(await x("core","form"))(e)),w("evDone",(e=null,t=null)=>{let a={maxCall:e?toNum(e):0,doneCall:t?toNum(t):0,doneNew:(t?toNum(t):0)+1};return{doneCan:!a.maxCall||!a.doneCall||a.doneCall<a.maxCall,doneNew:a.doneNew}}),w("rateBuild",{delay:0,force:!1,fn:rateLimit(async(e,t)=>{await build(e,t)},0,!1),initBuild(){this.fn=rateLimit(async(e,t)=>{await build(e,t)},this.delay,this.force)},setParams(e,t){this.delay=e,this.force=t,this.initBuild()}}),w("evRate",(e=null,t=null)=>{let a={debounce:e?toNum(e):0,throttle:t?toNum(t):0},r={force:a.debounce||a.throttle?!a.debounce:null,delay:a.debounce||a.throttle||0};return(rateBuild.delay!==r.delay||rateBuild.force!==r.force)&&rateBuild.setParams(r.delay,r.force),null!==r.force}),w("replValApi",(e=null,t=null,a=!1)=>{if(e&&t){let r=a?(e,t)=>e.replace(/{{(.*?)}}/g,t||""):(e,t)=>e.replace(/{{(.*?)}}/g,(e,a)=>t.getAttribute(a)||"");for(let n in e)if(e.hasOwnProperty(n)){if(isObj(e[n]))for(let l in e[n])e[n].hasOwnProperty(l)&&hasStr(e[n][l])&&(e[n][l]=r(e[n][l],t));else hasStr(e[n])&&(e[n]=r(e[n],t))}}return e});let z=async(e,t,a,n,l)=>{if(!coreData.events?.[t]||t!==e.type&&!q.core.includes(t)){e.stopPropagation();return}hasArr(coreData.evtAdd?.[t])&&coreData.evtAdd[t].forEach(({currFn:t})=>t(e));let i=n?document.activeElement:isElem(e?.target)?e.target:e?.target?.parentElement||null;if(n){let o=$(`[data-${t}]:not([data-event="false"]) ?`);o.length&&o.forEach(a=>{if(checkOff(a,t)){let r=evDone(a.getAttribute(`data-call-${t}`),a.getAttribute(`data-calls-${t}`));r.doneCan&&(a.setAttribute(`data-calls-${t}`,r.doneNew),e.it=a,e.calls=r.doneNew,e.itType=t,evRate(a.getAttribute(`data-debounce-${t}`),a.getAttribute(`data-throttle-${t}`))?rateBuild.fn(e,t):build(e,t))}})}else if(isElem(i)){let s=!1,u=!1,c=!1,p=!1,d={},f=null,h=["animation","dragdrop","key","mouse","pointer","touch","transition"],m=t,y=$(`[data-${t}-out]:not(${r}) ?`),v=null,b="";"click"===t&&isObj(coreData.spa)&&(b=(v=i.$(`..{a:not(${r}, [data-spa="false"])}`))?.getAttribute("href")?.trim(),v&&!v.target&&b&&!/^\/\/|:/.test(b)&&checkOff(v,t)&&(l&&e.preventDefault(),s=!0));let _=n?i:i.$(`..{[data-${t}]:not(${r})}`),E=t;if(!_){for(let A of h)if(g[A].includes(t)){_=i.$(`..{[data-${A}]:not(${r})}`),E=A;break}}if(_&&checkOff(_,t)&&_.getAttribute(`data-${E}`)?.trim()&&(!n||n&&"false"!==_.dataset.event)&&(u=!0,(d=evDone(_.getAttribute(`data-call-${t}`),_.getAttribute(`data-calls-${t}`))).doneCan&&(l&&e.preventDefault(),c=!0)),!u){if(!(_=i.$(`..{[data-${t}-in]:not(${r})}`))){for(let k of h)if(g[k].includes(t)){_=i.$(`..{[data-${k}-in]:not(${r})}`),E=k;break}}(f=_&&_!==i&&checkOff(_,`${t}-in`)&&_.getAttribute(`data-${E}-in`)?.trim()?_.$(":: ?").find(e=>e.contains(i)):null)&&(d=evDone(_.getAttribute(`data-call-${t}-in`),_.getAttribute(`data-calls-${t}-in`))).doneCan&&(l&&e.preventDefault(),p=!0)}if(!y.length){for(let L of h)if(g[L].includes(t)){y=$(`[data-${L}-out]:not(${r}) ?`),m=L;break}}if(y.length){let P=i.$(`..{[data-${t}-out]:not(${r})}`);if(!P){for(let C of h)if(g[C].includes(t)){P=i.$(`..{[data-${C}-out]:not(${r})}`);break}}for(let O of y)if(O!==P&&checkOff(O,`${t}-out`)){let S=evDone(O.getAttribute(`data-call-${t}-out`),O.getAttribute(`data-calls-${t}-out`));S.doneCan&&("mutation"!==t&&O.setAttribute(`data-calls-${t}-out`,S.doneNew),e.it=O,e.calls="mutation"!==t?S.doneNew:null,e.itType=`${t}-out`,"submit"===t&&(e.form=await formObj(O)),evRate(O.getAttribute(`data-debounce-${t}-out`),O.getAttribute(`data-throttle-${t}-out`))?await rateBuild.fn(e,`${m}-out`):await build(e,`${m}-out`))}}if(s){e.it=v;let T=null,M=v.getAttribute("data-spa-use")?.trim()||Object.keys(coreData.spa)[0];M=coreData.spa.hasOwnProperty(M)?M:Object.keys(coreData.spa)[0],!b.startsWith("#")&&coreData.spa[M].api&&(T=replValApi(cloneObj(coreData.spa[M].api),v,!1));let H=v.dataset.spa||null;if(await spa({path:b,spa:M,component:H,api:T,it:v}),H){let N=evDone(v.getAttribute("data-call-spa"),v.getAttribute("data-calls-spa"));N.doneCan&&(v.setAttribute("data-calls-spa",N.doneNew),e.calls=N.doneNew,e.itType="spa",evRate(v.getAttribute("data-debounce-spa"),v.getAttribute("data-throttle-spa"))?await rateBuild.fn(e,"spa"):await build(e,"spa"))}}u?c&&("mutation"!==t&&_.setAttribute(`data-calls-${t}`,d.doneNew),e.it=_,e.calls="mutation"!==t?d.doneNew:null,e.itType=t,"submit"===t&&(e.form=await formObj(_)),evRate(_.getAttribute(`data-debounce-${t}`),_.getAttribute(`data-throttle-${t}`))?await rateBuild.fn(e,E):await build(e,E)):p&&("mutation"!==t&&_.setAttribute(`data-calls-${t}-in`,d.doneNew),e.it=f,e.calls="mutation"!==t?d.doneNew:null,e.itType=`${t}-in`,"submit"===t&&(e.form=await formObj(f)),evRate(_.getAttribute(`data-debounce-${t}-in`),_.getAttribute(`data-throttle-${t}-in`))?await rateBuild.fn(e,`${E}-in`):await build(e,`${E}-in`))}if(a){let D=await x("event",t);isFn(D)&&D(e)}},R=coreData.events?.hasOwnProperty("mutation")?new MutationObserver(e=>{e.forEach(e=>z(e,"mutation",!0,!1,!1))}):null;if(coreData.events?.mutation&&R.observe($("html"),E),w("evt",{async add(e=null,t=null,a=!1){(await x("core","evt"))("add",this,[e,t,a,k,L,m,q,E])},async remove(e=null,t=null,a=!1){(await x("core","evt"))("remove",this,[e,t,a,k,L,m,q])},async has(...e){return(await x("core","evt"))("has",this,[e,C,O,k,L,P])},async on(...e){(await x("core","evt"))("on",this,[e,C,O,k,L,P])},async off(...e){(await x("core","evt"))("off",this,[e,C,O,k,L,P])},async toggle(...e){return(await x("core","evt"))("toggle",this,[e,C,O,k,L,P])},async run(...e){if(e.length){let t=e.slice(1);hasArr(coreData.evtAdd?.[e[0]])&&coreData.evtAdd[e[0]].forEach(({currFn:e=fn})=>e(...t)),hasArr(coreData.eventAdd?.[e[0]])&&coreData.eventAdd[e[0]].forEach(({currFn:e=fn})=>e(...t)),(await x("core","evtGroup"))(e[0],...t);let a=await x("event",e[0]);if(isFn(a))return await a(...t)}}}),[Element.prototype,Array.prototype,NodeList.prototype,HTMLCollection.prototype,Document.prototype].forEach(e=>{Object.defineProperty(e,"evt",{get(){return Object.fromEntries(Object.entries(evt).map(([e,t])=>[e,t.bind(this)]))},configurable:!0,enumerable:!1})}),isObj(coreData.events)){for(let U in coreData.events)if(coreData.events.hasOwnProperty(U)&&!q.core.includes(U)){if(q.target.includes(U)){let J=B(U),Z=["keydown","keypress","keyup"].includes(U),G=!m.allow.includes(U)&&(m.prevent.includes(U)||!Z&&!q.allow.includes(U)&&!q.event.includes(U));coreData.eventDefault[U]=e=>{z(e,U,J,Z,G)},V(U,!0,!J)}else V(U,!1,!0)}}let K=(e="ready")=>{let t=$(`[data-${e}]:not([data-event="false"]):not([data-run="true"]) ?`);t.length&&t.forEach(t=>{!t.hasAttribute("data-run")&&checkOff(t,e)&&(t.setAttribute(`data-calls-${e}`,1),build({it:t,calls:1,type:e},e))})};"loading"===document.readyState?dEvent("DOMContentLoaded",()=>{coreData.init?.type!=="load"&&init("ready"),coreData.events?.ready&&(evt.run("ready"),K("ready"))}):(coreData.init?.type!=="load"&&init("ready"),coreData.events?.ready&&(evt.run("ready"),K("ready"))),"complete"===document.readyState?(coreData.init?.type==="load"&&init("load"),coreData.events?.load&&(evt.run("load"),K("load"))):wEvent("load",()=>{coreData.init?.type==="load"&&init("load"),coreData.events?.load&&(evt.run("load"),K("load"))}),isNum(coreData.cacheTime)&&setInterval(async()=>(await x("core","clear"))(),1e3*coreData.cacheTime)};